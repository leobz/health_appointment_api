---
openapi: 3.0.3
info:
  title: Health Appointment API
  version: 1.0.0
servers:
- url: http://localhost:3000
paths:
  "/api/v1/appointments":
    post:
      summary: create
      tags:
      - Appointments
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                doctor_id:
                  type: integer
                patient_id:
                  type: integer
                start_time:
                  type: string
              required:
              - doctor_id
              - patient_id
              - start_time
            example:
              doctor_id: 1
              patient_id: 1
              start_time: '2024-01-01T15:00:00.000+00:00'
      responses:
        '201':
          description: creates a new appointment
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  doctor_id:
                    type: integer
                  patient_id:
                    type: integer
                  start_time:
                    type: string
                required:
                - id
                - doctor_id
                - patient_id
                - start_time
              example:
                id: 1
                doctor_id: 1
                patient_id: 1
                start_time: '2024-01-01T15:00:00Z'
  "/api/v1/appointments/{id}":
    delete:
      summary: destroy
      tags:
      - Appointments
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      responses:
        '204':
          description: deletes an appointment
    put:
      summary: update
      tags:
      - Appointments
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                doctor_id:
                  type: integer
                patient_id:
                  type: integer
                start_time:
                  type: string
              required:
              - doctor_id
              - patient_id
              - start_time
            example:
              doctor_id: 1
              patient_id: 1
              start_time: '2024-01-08T16:00:00.000+00:00'
      responses:
        '200':
          description: updates an appointment
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  doctor_id:
                    type: integer
                  patient_id:
                    type: integer
                  start_time:
                    type: string
                required:
                - id
                - doctor_id
                - patient_id
                - start_time
              example:
                id: 1
                doctor_id: 1
                patient_id: 1
                start_time: '2024-01-08T16:00:00Z'
  "/api/v1/doctors":
    get:
      summary: index
      tags:
      - Doctors
      responses:
        '200':
          description: returns a list of doctors
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    first_name:
                      type: string
                    last_name:
                      type: string
                    time_slot_per_client_in_min:
                      type: integer
                    created_at:
                      type: string
                    updated_at:
                      type: string
                  required:
                  - id
                  - first_name
                  - last_name
                  - time_slot_per_client_in_min
                  - created_at
                  - updated_at
              example:
              - id: 1
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.703Z'
                updated_at: '2024-06-12T03:26:25.703Z'
              - id: 2
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.704Z'
                updated_at: '2024-06-12T03:26:25.704Z'
              - id: 3
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.705Z'
                updated_at: '2024-06-12T03:26:25.705Z'
              - id: 4
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.705Z'
                updated_at: '2024-06-12T03:26:25.705Z'
              - id: 5
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.706Z'
                updated_at: '2024-06-12T03:26:25.706Z'
              - id: 6
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.706Z'
                updated_at: '2024-06-12T03:26:25.706Z'
              - id: 7
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.706Z'
                updated_at: '2024-06-12T03:26:25.706Z'
              - id: 8
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.707Z'
                updated_at: '2024-06-12T03:26:25.707Z'
              - id: 9
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.707Z'
                updated_at: '2024-06-12T03:26:25.707Z'
              - id: 10
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.708Z'
                updated_at: '2024-06-12T03:26:25.708Z'
    post:
      summary: create
      tags:
      - Doctors
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                time_slot_per_client_in_min:
                  type: string
              required:
              - first_name
              - last_name
              - time_slot_per_client_in_min
            example:
              first_name: John
              last_name: Doe
              time_slot_per_client_in_min: '15'
      responses:
        '201':
          description: 'Valid Request: creates a doctor'
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  first_name:
                    type: string
                  last_name:
                    type: string
                  time_slot_per_client_in_min:
                    type: integer
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - id
                - first_name
                - last_name
                - time_slot_per_client_in_min
                - created_at
                - updated_at
              example:
                id: 11
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 15
                created_at: '2024-06-12T03:26:25.741Z'
                updated_at: '2024-06-12T03:26:25.741Z'
        '422':
          description: 'Invalid Request: returns status code 422'
          content:
            application/json:
              schema:
                type: object
                properties:
                  last_name:
                    type: array
                    items:
                      type: string
                  time_slot_per_client_in_min:
                    type: array
                    items:
                      type: string
                required:
                - last_name
                - time_slot_per_client_in_min
              example:
                last_name:
                - can't be blank
                time_slot_per_client_in_min:
                - can't be blank
  "/api/v1/doctors/{doctor_id}/availabilities":
    get:
      summary: index
      tags:
      - Availabilities
      parameters:
      - name: doctor_id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      - name: end_date
        in: query
        required: false
        schema:
          type: string
        example: '2024-06-10'
      - name: start_date
        in: query
        required: false
        schema:
          type: string
        example: '2024-06-03'
      responses:
        '200':
          description: returns a list of availabilities
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date:
                      type: string
                    time_slots:
                      type: array
                      items:
                        type: object
                        properties:
                          start_time:
                            type: string
                        required:
                        - start_time
                  required:
                  - date
                  - time_slots
              example:
              - date: '2024-06-03'
                time_slots:
                - start_time: '2024-06-03T11:00:00-03:00'
              - date: '2024-06-05'
                time_slots:
                - start_time: '2024-06-05T10:00:00-03:00'
                - start_time: '2024-06-05T11:00:00-03:00'
              - date: '2024-06-10'
                time_slots:
                - start_time: '2024-06-10T10:00:00-03:00'
                - start_time: '2024-06-10T11:00:00-03:00'
  "/api/v1/doctors/{doctor_id}/working_hours":
    get:
      summary: index
      tags:
      - WorkingHours
      parameters:
      - name: doctor_id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      responses:
        '200':
          description: returns a list of working hours
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    day:
                      type: string
                    end_time:
                      type: string
                    start_time:
                      type: string
                    day_of_week:
                      type: string
                  required:
                  - end_time
                  - start_time
              example:
              - day_of_week: monday
                end_time: '17:00'
                start_time: '09:00'
              - day_of_week: friday
                end_time: '17:00'
                start_time: '09:00'
  "/api/v1/doctors/{id}":
    delete:
      summary: destroy
      tags:
      - Doctors
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      responses:
        '204':
          description: returns status code 204
    get:
      summary: show
      tags:
      - Doctors
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 100
      responses:
        '200':
          description: returns the doctor if record exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  first_name:
                    type: string
                  last_name:
                    type: string
                  time_slot_per_client_in_min:
                    type: integer
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - id
                - first_name
                - last_name
                - time_slot_per_client_in_min
                - created_at
                - updated_at
              example:
                id: 1
                first_name: John
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.712Z'
                updated_at: '2024-06-12T03:26:25.712Z'
        '404':
          description: returns status code 404 if record does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                required:
                - error
              example:
                error: Couldn't find Doctor
    put:
      summary: update
      tags:
      - Doctors
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                first_name:
                  type: string
              required:
              - first_name
            example:
              first_name: Jane
      responses:
        '200':
          description: updates the record
          content:
            application/json:
              schema:
                type: object
                properties:
                  first_name:
                    type: string
                  id:
                    type: integer
                  last_name:
                    type: string
                  time_slot_per_client_in_min:
                    type: integer
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - first_name
                - id
                - last_name
                - time_slot_per_client_in_min
                - created_at
                - updated_at
              example:
                first_name: Jane
                id: 1
                last_name: Doe
                time_slot_per_client_in_min: 60
                created_at: '2024-06-12T03:26:25.750Z'
                updated_at: '2024-06-12T03:26:25.756Z'
  "/api/v1/patients":
    get:
      summary: index
      tags:
      - Patients
      responses:
        '200':
          description: returns a list of patients
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    first_name:
                      type: string
                    last_name:
                      type: string
                    created_at:
                      type: string
                    updated_at:
                      type: string
                  required:
                  - id
                  - first_name
                  - last_name
                  - created_at
                  - updated_at
              example:
              - id: 1
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.767Z'
                updated_at: '2024-06-12T03:26:25.767Z'
              - id: 2
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.768Z'
                updated_at: '2024-06-12T03:26:25.768Z'
              - id: 3
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.769Z'
                updated_at: '2024-06-12T03:26:25.769Z'
              - id: 4
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.769Z'
                updated_at: '2024-06-12T03:26:25.769Z'
              - id: 5
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.770Z'
                updated_at: '2024-06-12T03:26:25.770Z'
              - id: 6
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.770Z'
                updated_at: '2024-06-12T03:26:25.770Z'
              - id: 7
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.771Z'
                updated_at: '2024-06-12T03:26:25.771Z'
              - id: 8
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.771Z'
                updated_at: '2024-06-12T03:26:25.771Z'
              - id: 9
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.771Z'
                updated_at: '2024-06-12T03:26:25.771Z'
              - id: 10
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.772Z'
                updated_at: '2024-06-12T03:26:25.772Z'
    post:
      summary: create
      tags:
      - Patients
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
              required:
              - first_name
              - last_name
            example:
              first_name: John
              last_name: Doe
      responses:
        '201':
          description: 'Valid Request: creates a patient'
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  first_name:
                    type: string
                  last_name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - id
                - first_name
                - last_name
                - created_at
                - updated_at
              example:
                id: 11
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.796Z'
                updated_at: '2024-06-12T03:26:25.796Z'
        '422':
          description: 'Invalid Request: returns status code 422'
          content:
            application/json:
              schema:
                type: object
                properties:
                  last_name:
                    type: array
                    items:
                      type: string
                required:
                - last_name
              example:
                last_name:
                - can't be blank
  "/api/v1/patients/{id}":
    delete:
      summary: destroy
      tags:
      - Patients
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      responses:
        '204':
          description: returns status code 204
    get:
      summary: show
      tags:
      - Patients
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 100
      responses:
        '200':
          description: returns the patient if record exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  first_name:
                    type: string
                  last_name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - id
                - first_name
                - last_name
                - created_at
                - updated_at
              example:
                id: 1
                first_name: John
                last_name: Doe
                created_at: '2024-06-12T03:26:25.776Z'
                updated_at: '2024-06-12T03:26:25.776Z'
        '404':
          description: returns status code 404 if record does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                required:
                - error
              example:
                error: Couldn't find Patient
    put:
      summary: update
      tags:
      - Patients
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        example: 1
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                first_name:
                  type: string
              required:
              - first_name
            example:
              first_name: Jane
      responses:
        '200':
          description: updates the record
          content:
            application/json:
              schema:
                type: object
                properties:
                  first_name:
                    type: string
                  id:
                    type: integer
                  last_name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                - first_name
                - id
                - last_name
                - created_at
                - updated_at
              example:
                first_name: Jane
                id: 1
                last_name: Doe
                created_at: '2024-06-12T03:26:25.805Z'
                updated_at: '2024-06-12T03:26:25.811Z'
